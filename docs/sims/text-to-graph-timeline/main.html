<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Text2KGBench-LettrIA: F1 Scores Over Time</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3.0.0/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #fafafa;
            padding: 10px;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            padding: 15px;
        }
        h1 {
            font-size: 1.1rem;
            color: #333;
            margin-bottom: 10px;
            text-align: center;
        }
        .controls {
            display: flex;
            gap: 15px;
            margin-bottom: 12px;
            flex-wrap: wrap;
            align-items: center;
            justify-content: center;
        }
        .control-group {
            display: flex;
            align-items: center;
            gap: 6px;
        }
        label {
            font-size: 0.85rem;
            color: #555;
            font-weight: 500;
        }
        select {
            padding: 5px 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 0.85rem;
            background: white;
            cursor: pointer;
        }
        .legend-container {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 10px;
            font-size: 0.8rem;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .legend-color {
            width: 14px;
            height: 14px;
            border-radius: 50%;
        }
        .legend-shape {
            font-size: 0.75rem;
            color: #666;
        }
        .chart-wrapper {
            position: relative;
            height: 450px;
        }
        .shape-legend {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 8px;
            font-size: 0.75rem;
            color: #666;
        }
        .shape-item {
            display: flex;
            align-items: center;
            gap: 4px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Text2KGBench-LettrIA: F1 Scores Over Time (Generalization Benchmark)</h1>

        <div class="controls">
            <div class="control-group">
                <label for="metric">Metric:</label>
                <select id="metric">
                    <option value="entities">Entities (E)</option>
                    <option value="attributes">Attributes (A)</option>
                    <option value="properties">Properties (P)</option>
                    <option value="relations">Relations (R)</option>
                </select>
            </div>
            <div class="control-group">
                <label for="modelType">Show:</label>
                <select id="modelType">
                    <option value="all">All Models</option>
                    <option value="closed">Closed/Proprietary Only</option>
                    <option value="open">Open-Weights Only</option>
                </select>
            </div>
        </div>

        <div class="legend-container">
            <div class="legend-item">
                <div class="legend-color" style="background: #D97706;"></div>
                <span>Anthropic</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #4285F4;"></div>
                <span>Google</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #10A37F;"></div>
                <span>OpenAI</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #FF6B35;"></div>
                <span>Mistral</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #9333EA;"></div>
                <span>Alibaba</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #06B6D4;"></div>
                <span>Microsoft</span>
            </div>
        </div>

        <div class="shape-legend">
            <div class="shape-item">
                <span style="font-size: 1.1rem;">●</span>
                <span>Closed/Proprietary</span>
            </div>
            <div class="shape-item">
                <span style="font-size: 1.1rem;">▲</span>
                <span>Open-Weights</span>
            </div>
        </div>

        <div class="chart-wrapper">
            <canvas id="chart"></canvas>
        </div>
    </div>

    <script>
        // Model data with F1 scores from Text2KGBench-LettrIA Generalization Results (Appendix C)
        const models = [
            // Closed/Proprietary Models
            { name: 'Claude 3 Haiku', publisher: 'Anthropic', date: '2024-03-14', type: 'closed', E: 0.6898, A: 0.4962, P: 0.4943, R: 0.5257 },
            { name: 'Claude 3 Sonnet', publisher: 'Anthropic', date: '2024-03-04', type: 'closed', E: 0.7777, A: 0.876, P: 0.8384, R: 0.6338 },
            { name: 'Claude 3 Opus', publisher: 'Anthropic', date: '2024-03-04', type: 'closed', E: 0.7825, A: 0.9405, P: 0.9102, R: 0.7199 },
            { name: 'GPT-4o', publisher: 'OpenAI', date: '2024-05-13', type: 'closed', E: 0.7489, A: 0.88, P: 0.8584, R: 0.6539 },
            { name: 'Claude 3.5 Sonnet V1', publisher: 'Anthropic', date: '2024-06-20', type: 'closed', E: 0.7539, A: 0.9277, P: 0.91, R: 0.6842 },
            { name: 'GPT-4o Mini', publisher: 'OpenAI', date: '2024-07-18', type: 'closed', E: 0.68, A: 0.6632, P: 0.6585, R: 0.438 },
            { name: 'Claude 3.5 Haiku', publisher: 'Anthropic', date: '2024-10-22', type: 'closed', E: 0.7499, A: 0.8811, P: 0.8489, R: 0.651 },
            { name: 'Claude 3.5 Sonnet V2', publisher: 'Anthropic', date: '2024-10-22', type: 'closed', E: 0.7823, A: 0.9581, P: 0.9333, R: 0.7089 },
            { name: 'Gemini 2.0 Flash', publisher: 'Google', date: '2024-12-11', type: 'closed', E: 0.4522, A: 0.6017, P: 0.5789, R: 0.449 },
            { name: 'Gemini 2.0 Flash Lite', publisher: 'Google', date: '2024-12-11', type: 'closed', E: 0.6968, A: 0.7877, P: 0.7572, R: 0.5783 },
            { name: 'Claude 3.7 Sonnet', publisher: 'Anthropic', date: '2025-02-24', type: 'closed', E: 0.7775, A: 0.9471, P: 0.9278, R: 0.7146 },
            { name: 'Gemini 2.5 Pro', publisher: 'Google', date: '2025-03-25', type: 'closed', E: 0.7748, A: 0.958, P: 0.9368, R: 0.7242 },
            { name: 'Gemini 2.5 Flash', publisher: 'Google', date: '2025-03-25', type: 'closed', E: 0.5572, A: 0.7033, P: 0.676, R: 0.5447 },
            { name: 'Gemini 2.5 Flash Lite', publisher: 'Google', date: '2025-03-25', type: 'closed', E: 0.771, A: 0.2881, P: 0.2503, R: 0.6158 },
            { name: 'GPT-4.1', publisher: 'OpenAI', date: '2025-04-14', type: 'closed', E: 0.7731, A: 0.9193, P: 0.9013, R: 0.6773 },
            { name: 'GPT-4.1 Mini', publisher: 'OpenAI', date: '2025-04-14', type: 'closed', E: 0.7764, A: 0.8906, P: 0.8607, R: 0.6766 },
            { name: 'GPT-4.1 Nano', publisher: 'OpenAI', date: '2025-04-14', type: 'closed', E: 0.6756, A: 0.6431, P: 0.6315, R: 0.2831 },
            { name: 'Claude Sonnet 4', publisher: 'Anthropic', date: '2025-05-22', type: 'closed', E: 0.7829, A: 0.9509, P: 0.9283, R: 0.7179 },
            { name: 'Mistral Medium 2505', publisher: 'Mistral', date: '2025-05-30', type: 'closed', E: 0.7661, A: 0.7875, P: 0.796, R: 0.6444 },
            // Open-Weights Models (Fine-tuned)
            { name: 'Phi-4 (14B)', publisher: 'Microsoft', date: '2024-12-12', type: 'open', E: 0.7727, A: 0.8783, P: 0.8565, R: 0.6375 },
            { name: 'Gemma 3 4B-IT', publisher: 'Google', date: '2025-03-12', type: 'open', E: 0.7382, A: 0.8757, P: 0.8443, R: 0.6361 },
            { name: 'Gemma 3 12B-IT', publisher: 'Google', date: '2025-03-12', type: 'open', E: 0.8376, A: 0.9279, P: 0.8919, R: 0.7219 },
            { name: 'Gemma 3 27B-IT', publisher: 'Google', date: '2025-03-12', type: 'open', E: 0.8372, A: 0.9315, P: 0.8901, R: 0.7061 },
            { name: 'Qwen3 0.6B', publisher: 'Alibaba', date: '2025-05-14', type: 'open', E: 0.7659, A: 0.8768, P: 0.8329, R: 0.5129 },
            { name: 'Qwen3 1.7B', publisher: 'Alibaba', date: '2025-05-14', type: 'open', E: 0.7827, A: 0.8951, P: 0.8552, R: 0.592 },
            { name: 'Qwen3 4B', publisher: 'Alibaba', date: '2025-05-14', type: 'open', E: 0.7767, A: 0.9147, P: 0.8811, R: 0.6516 },
            { name: 'Qwen3 8B', publisher: 'Alibaba', date: '2025-05-14', type: 'open', E: 0.8198, A: 0.9197, P: 0.8904, R: 0.7139 },
            { name: 'Qwen3 14B', publisher: 'Alibaba', date: '2025-05-14', type: 'open', E: 0.7943, A: 0.936, P: 0.8979, R: 0.7024 },
            { name: 'Qwen3 32B', publisher: 'Alibaba', date: '2025-05-14', type: 'open', E: 0.7748, A: 0.9203, P: 0.8982, R: 0.7087 },
            { name: 'Mistral Small 3.2', publisher: 'Mistral', date: '2025-06-19', type: 'open', E: 0.8014, A: 0.9368, P: 0.9105, R: 0.7221 }
        ];

        // Publisher colors
        const publisherColors = {
            'Anthropic': '#D97706',
            'Google': '#4285F4',
            'OpenAI': '#10A37F',
            'Mistral': '#FF6B35',
            'Alibaba': '#9333EA',
            'Microsoft': '#06B6D4'
        };

        // Metric labels
        const metricLabels = {
            'entities': 'Entities F1',
            'attributes': 'Attributes F1',
            'properties': 'Properties F1',
            'relations': 'Relations F1'
        };

        const metricKeys = {
            'entities': 'E',
            'attributes': 'A',
            'properties': 'P',
            'relations': 'R'
        };

        let chart;

        function getFilteredData(metric, modelType) {
            const key = metricKeys[metric];
            let filtered = models;

            if (modelType === 'closed') {
                filtered = models.filter(m => m.type === 'closed');
            } else if (modelType === 'open') {
                filtered = models.filter(m => m.type === 'open');
            }

            // Group by publisher and type for separate datasets
            const datasets = [];
            const publishers = [...new Set(filtered.map(m => m.publisher))];

            publishers.forEach(publisher => {
                const closedModels = filtered.filter(m => m.publisher === publisher && m.type === 'closed');
                const openModels = filtered.filter(m => m.publisher === publisher && m.type === 'open');

                if (closedModels.length > 0) {
                    datasets.push({
                        label: `${publisher} (Closed)`,
                        data: closedModels.map(m => ({
                            x: new Date(m.date),
                            y: m[key],
                            model: m
                        })),
                        backgroundColor: publisherColors[publisher],
                        borderColor: publisherColors[publisher],
                        pointStyle: 'circle',
                        pointRadius: 8,
                        pointHoverRadius: 11,
                        showLine: false
                    });
                }

                if (openModels.length > 0) {
                    datasets.push({
                        label: `${publisher} (Open)`,
                        data: openModels.map(m => ({
                            x: new Date(m.date),
                            y: m[key],
                            model: m
                        })),
                        backgroundColor: publisherColors[publisher],
                        borderColor: publisherColors[publisher],
                        pointStyle: 'triangle',
                        pointRadius: 9,
                        pointHoverRadius: 12,
                        showLine: false
                    });
                }
            });

            return datasets;
        }

        function createChart() {
            const ctx = document.getElementById('chart').getContext('2d');
            const metric = document.getElementById('metric').value;
            const modelType = document.getElementById('modelType').value;

            const config = {
                type: 'scatter',
                data: {
                    datasets: getFilteredData(metric, modelType)
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        mode: 'nearest',
                        intersect: true
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0, 0, 0, 0.85)',
                            titleFont: { size: 13, weight: 'bold' },
                            bodyFont: { size: 12 },
                            padding: 12,
                            cornerRadius: 6,
                            displayColors: false,
                            callbacks: {
                                title: function(context) {
                                    const model = context[0].raw.model;
                                    return model.name;
                                },
                                label: function(context) {
                                    const model = context.raw.model;
                                    return [
                                        `Publisher: ${model.publisher}`,
                                        `Type: ${model.type === 'closed' ? 'Closed/Proprietary' : 'Open-Weights'}`,
                                        `Release: ${model.date}`,
                                        ``,
                                        `Entities F1: ${model.E.toFixed(4)}`,
                                        `Attributes F1: ${model.A.toFixed(4)}`,
                                        `Properties F1: ${model.P.toFixed(4)}`,
                                        `Relations F1: ${model.R.toFixed(4)}`
                                    ];
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            type: 'time',
                            time: {
                                unit: 'month',
                                displayFormats: {
                                    month: 'MMM yyyy'
                                }
                            },
                            title: {
                                display: true,
                                text: 'Model Release Date',
                                font: { size: 12, weight: 'bold' }
                            },
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)'
                            },
                            min: '2024-02-01',
                            max: '2025-08-01'
                        },
                        y: {
                            title: {
                                display: true,
                                text: metricLabels[metric],
                                font: { size: 12, weight: 'bold' }
                            },
                            min: 0,
                            max: 1,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)'
                            },
                            ticks: {
                                callback: function(value) {
                                    return value.toFixed(1);
                                }
                            }
                        }
                    }
                }
            };

            chart = new Chart(ctx, config);
        }

        function updateChart() {
            const metric = document.getElementById('metric').value;
            const modelType = document.getElementById('modelType').value;

            chart.data.datasets = getFilteredData(metric, modelType);
            chart.options.scales.y.title.text = metricLabels[metric];
            chart.update();
        }

        document.getElementById('metric').addEventListener('change', updateChart);
        document.getElementById('modelType').addEventListener('change', updateChart);

        createChart();
    </script>
</body>
</html>
