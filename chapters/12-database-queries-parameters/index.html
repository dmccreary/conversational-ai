
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A college level course on creating chatbots using AI.">
      
      
        <meta name="author" content="Dan McCreary">
      
      
        <link rel="canonical" href="https://dmccreary.github.io/conversational-ai/chapters/12-database-queries-parameters/">
      
      
        <link rel="prev" href="../11-nlp-pipelines-processing/quiz/">
      
      
        <link rel="next" href="quiz/">
      
      
      <link rel="icon" href="../../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.12">
    
    
      
        <title>Content - Conversational AI</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.2afb09e1.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="Content - Conversational AI" >
      
        <meta  property="og:description"  content="A college level course on creating chatbots using AI." >
      
        <meta  property="og:image"  content="https://dmccreary.github.io/conversational-ai/assets/images/social/chapters/12-database-queries-parameters/index.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://dmccreary.github.io/conversational-ai/chapters/12-database-queries-parameters/" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="Content - Conversational AI" >
      
        <meta  name="twitter:description"  content="A college level course on creating chatbots using AI." >
      
        <meta  name="twitter:image"  content="https://dmccreary.github.io/conversational-ai/assets/images/social/chapters/12-database-queries-parameters/index.png" >
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="gold" data-md-color-accent="black">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#database-queries-and-parameter-extraction" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Conversational AI" class="md-header__button md-logo" aria-label="Conversational AI" data-md-component="logo">
      
  <img src="../../img/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Conversational AI
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Content
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/dmccreary/conversational-ai" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub Repo
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Conversational AI" class="md-nav__button md-logo" aria-label="Conversational AI" data-md-component="logo">
      
  <img src="../../img/logo.png" alt="logo">

    </a>
    Conversational AI
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/dmccreary/conversational-ai" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub Repo
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    About
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../course-description/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Course Description
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Chapters
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Chapters
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../01-foundations-ai-nlp/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Chapter 1 - Foundations of AI and NLP
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../02-search-technologies-indexing/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Chapter 2 - Search Technologies and Indexing
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../03-semantic-search-quality-metrics/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Chapter 3 - Semantic Search and Quality Metrics
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../04-large-language-models-tokenization/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Chapter 4 - Large Language Models and Tokenization
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../05-embeddings-vector-databases/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Chapter 5 - Embeddings and Vector Databases
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../06-building-chatbots-intent/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Chapter 6 - Building Chatbots and Intent Recognition
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../07-chatbot-frameworks-ui/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Chapter 7 - Chatbot Frameworks and User Interfaces
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../08-user-feedback-improvement/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Chapter 8 - User Feedback and Continuous Improvement
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../09-rag-pattern/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Chapter 9 - The RAG Pattern
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../10-knowledge-graphs-graphrag/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Chapter 10 - Knowledge Graphs and GraphRAG
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../11-nlp-pipelines-processing/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Chapter 11 - NLP Pipelines and Text Processing
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_13" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="./" class="md-nav__link md-nav__link--active">
              
  
  
  <span class="md-ellipsis">
    Chapter 12 - Database Queries and Parameter Extraction
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link md-nav__link--active" for="__nav_4_13" id="__nav_4_13_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_13_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_13">
            <span class="md-nav__icon md-icon"></span>
            Chapter 12 - Database Queries and Parameter Extraction
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="quiz/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Quiz
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../13-security-privacy-users/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Chapter 13 - Security Privacy and User Management
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../14-evaluation-optimization-careers/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Chapter 14 - Evaluation Optimization and Career Development
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../sims/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    MicroSims
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../learning-graph/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Learning Graph
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../prompts/01-bloom-taxonomy-enrichment/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Sample Prompts
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../faq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FAQs
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../glossary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Glossary
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how-we-built-this-site/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    How We Built This Site
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../references/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    References
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../feedback/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Feedback
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../license/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    License
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contact/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contact
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    <span class="md-ellipsis">
      Summary
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#concepts-covered" class="md-nav__link">
    <span class="md-ellipsis">
      Concepts Covered
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#introduction-to-database-connected-chatbots" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction to Database-Connected Chatbots
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#understanding-database-queries-in-conversational-context" class="md-nav__link">
    <span class="md-ellipsis">
      Understanding Database Queries in Conversational Context
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sql-query-fundamentals-for-chatbot-applications" class="md-nav__link">
    <span class="md-ellipsis">
      SQL Query Fundamentals for Chatbot Applications
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SQL Query Fundamentals for Chatbot Applications">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#essential-sql-query-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      Essential SQL Query Patterns
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#query-parameters-the-bridge-between-questions-and-data" class="md-nav__link">
    <span class="md-ellipsis">
      Query Parameters: The Bridge Between Questions and Data
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Query Parameters: The Bridge Between Questions and Data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameter-extraction-techniques" class="md-nav__link">
    <span class="md-ellipsis">
      Parameter Extraction Techniques
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Parameter Extraction Techniques">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#microsim-parameter-extraction-interactive-demo" class="md-nav__link">
    <span class="md-ellipsis">
      MicroSim: Parameter Extraction Interactive Demo
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#query-templates-reusable-patterns-for-common-questions" class="md-nav__link">
    <span class="md-ellipsis">
      Query Templates: Reusable Patterns for Common Questions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Query Templates: Reusable Patterns for Common Questions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#building-an-effective-template-library" class="md-nav__link">
    <span class="md-ellipsis">
      Building an Effective Template Library
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Building an Effective Template Library">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#diagram-query-template-matching-flow" class="md-nav__link">
    <span class="md-ellipsis">
      Diagram: Query Template Matching Flow
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parameterized-queries-security-and-performance" class="md-nav__link">
    <span class="md-ellipsis">
      Parameterized Queries: Security and Performance
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Parameterized Queries: Security and Performance">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-sql-injection-problem" class="md-nav__link">
    <span class="md-ellipsis">
      The SQL Injection Problem
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-parameterized-queries-safely" class="md-nav__link">
    <span class="md-ellipsis">
      Using Parameterized Queries Safely
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#additional-security-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      Additional Security Considerations
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#natural-language-to-sql-conversion-strategies" class="md-nav__link">
    <span class="md-ellipsis">
      Natural Language to SQL: Conversion Strategies
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Natural Language to SQL: Conversion Strategies">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#conversion-approaches-compared" class="md-nav__link">
    <span class="md-ellipsis">
      Conversion Approaches Compared
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1-template-matching-covered-in-previous-section" class="md-nav__link">
    <span class="md-ellipsis">
      1. Template Matching (Covered in Previous Section)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-semantic-parsing" class="md-nav__link">
    <span class="md-ellipsis">
      2. Semantic Parsing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-neural-sequence-to-sequence-models" class="md-nav__link">
    <span class="md-ellipsis">
      3. Neural Sequence-to-Sequence Models
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-large-language-model-llm-prompting" class="md-nav__link">
    <span class="md-ellipsis">
      4. Large Language Model (LLM) Prompting
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-hybrid-approaches-recommended-for-production" class="md-nav__link">
    <span class="md-ellipsis">
      5. Hybrid Approaches (Recommended for Production)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. Hybrid Approaches (Recommended for Production)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#diagram-natural-language-to-sql-conversion-pipeline" class="md-nav__link">
    <span class="md-ellipsis">
      Diagram: Natural Language to SQL Conversion Pipeline
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#question-to-query-mapping-understanding-user-intent" class="md-nav__link">
    <span class="md-ellipsis">
      Question to Query Mapping: Understanding User Intent
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Question to Query Mapping: Understanding User Intent">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#handling-ambiguity-through-clarification" class="md-nav__link">
    <span class="md-ellipsis">
      Handling Ambiguity Through Clarification
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#slot-filling-structured-parameter-representation" class="md-nav__link">
    <span class="md-ellipsis">
      Slot Filling: Structured Parameter Representation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Slot Filling: Structured Parameter Representation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#microsim-slot-filling-interactive-demo" class="md-nav__link">
    <span class="md-ellipsis">
      MicroSim: Slot Filling Interactive Demo
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#query-execution-and-results-handling" class="md-nav__link">
    <span class="md-ellipsis">
      Query Execution and Results Handling
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Query Execution and Results Handling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#execution-best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      Execution Best Practices
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#results-formatting-for-conversational-display" class="md-nav__link">
    <span class="md-ellipsis">
      Results Formatting for Conversational Display
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handling-query-errors-and-edge-cases" class="md-nav__link">
    <span class="md-ellipsis">
      Handling Query Errors and Edge Cases
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#key-takeaways" class="md-nav__link">
    <span class="md-ellipsis">
      Key Takeaways
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/dmccreary/conversational-ai/blob/master/docs/chapters/12-database-queries-parameters/index.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  


<h1 id="database-queries-and-parameter-extraction">Database Queries and Parameter Extraction</h1>
<h2 id="summary">Summary</h2>
<p>This chapter teaches how to enable chatbots to execute database queries based on natural language questions, a critical capability for data-driven conversational applications. You will learn about database query fundamentals, SQL query construction, parameter extraction from user questions, query templates and parameterization, natural language to SQL conversion, and slot filling techniques. These skills enable chatbots to answer questions that require accessing structured data from databases.</p>
<h2 id="concepts-covered">Concepts Covered</h2>
<p>This chapter covers the following 11 concepts from the learning graph:</p>
<ol>
<li>Database Query</li>
<li>SQL Query</li>
<li>Query Parameter</li>
<li>Parameter Extraction</li>
<li>Query Template</li>
<li>Parameterized Query</li>
<li>Query Execution</li>
<li>Query Description</li>
<li>Natural Language to SQL</li>
<li>Question to Query Mapping</li>
<li>Slot Filling</li>
</ol>
<h2 id="prerequisites">Prerequisites</h2>
<p>This chapter builds on concepts from:</p>
<ul>
<li><a href="../06-building-chatbots-intent/">Chapter 6: Building Chatbots and Intent Recognition</a></li>
<li><a href="../11-nlp-pipelines-processing/">Chapter 11: NLP Pipelines and Text Processing</a></li>
</ul>
<hr />
<h2 id="introduction-to-database-connected-chatbots">Introduction to Database-Connected Chatbots</h2>
<p>The most valuable chatbots don't just retrieve static documents—they answer questions by querying live databases, providing users with real-time information about sales, inventory, customer records, or system status. When a business analyst asks, "What were our Q4 sales in the Northeast region?" the chatbot must translate this natural language question into a database query, execute it against the appropriate tables, and present the results in a conversational format.</p>
<p>This capability transforms chatbots from simple FAQ systems into powerful data interfaces that democratize access to organizational information. Instead of requiring users to learn SQL or navigate complex business intelligence tools, chatbots enable anyone to ask questions in plain English and receive accurate, data-driven answers. However, building database-connected chatbots introduces significant challenges: understanding user questions, extracting query parameters, constructing safe SQL queries, handling ambiguities, and preventing SQL injection attacks.</p>
<p>In this chapter, you'll learn the architecture and techniques for connecting chatbots to databases, focusing on the critical skill of parameter extraction—identifying the specific values users reference in their questions and mapping them to database query parameters. By mastering these techniques, you'll be able to build conversational interfaces that make organizational data accessible to non-technical users while maintaining security and reliability.</p>
<h2 id="understanding-database-queries-in-conversational-context">Understanding Database Queries in Conversational Context</h2>
<p>Database queries retrieve, filter, and aggregate data from structured storage systems according to specified criteria. While traditional database applications present users with forms or visual query builders, conversational interfaces must infer query intent and parameters from unstructured natural language, introducing complexity at every stage of the process.</p>
<p>Consider a simple database schema for a sales system:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">sales</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="n">sale_id</span><span class="w"> </span><span class="nb">INT</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="p">,</span>
<span class="w">    </span><span class="n">product_name</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span>
<span class="w">    </span><span class="n">region</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span>
<span class="w">    </span><span class="n">sale_date</span><span class="w"> </span><span class="nb">DATE</span><span class="p">,</span>
<span class="w">    </span><span class="n">amount</span><span class="w"> </span><span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span>
<span class="w">    </span><span class="n">sales_rep</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>A business user might ask any of these equivalent questions:</p>
<ul>
<li>"What were sales in Q4?"</li>
<li>"Show me Q4 revenue"</li>
<li>"How much did we sell last quarter?"</li>
<li>"Q4 sales total?"</li>
</ul>
<p>All these questions require the same underlying query structure, but the chatbot must recognize temporal references ("Q4," "last quarter"), understand the implicit date filtering requirement, and distinguish between detailed records (return all rows) versus aggregated totals (return SUM).</p>
<p>The fundamental challenge of database-connected chatbots is <strong>bridging the semantic gap</strong> between how humans ask questions and how databases represent and query data:</p>
<table>
<thead>
<tr>
<th>User's Mental Model</th>
<th>Database Reality</th>
</tr>
</thead>
<tbody>
<tr>
<td>"Last quarter"</td>
<td>WHERE sale_date BETWEEN '2024-10-01' AND '2024-12-31'</td>
</tr>
<tr>
<td>"Northeast region"</td>
<td>WHERE region IN ('NY', 'MA', 'CT', 'NH', 'VT', 'ME', 'RI')</td>
</tr>
<tr>
<td>"Top products"</td>
<td>ORDER BY amount DESC LIMIT 10</td>
</tr>
<tr>
<td>"Average sale"</td>
<td>SELECT AVG(amount) FROM sales</td>
</tr>
<tr>
<td>"Sales trend"</td>
<td>GROUP BY MONTH(sale_date) ORDER BY sale_date</td>
</tr>
</tbody>
</table>
<p>Conversational database queries involve several distinct components:</p>
<ul>
<li><strong>Query intent:</strong> What operation does the user want? (retrieve, aggregate, compare, trend)</li>
<li><strong>Target entity:</strong> What table or view contains the relevant data?</li>
<li><strong>Filter parameters:</strong> What constraints limit the result set? (date ranges, categories, thresholds)</li>
<li><strong>Aggregation:</strong> Should results be summarized or returned as individual records?</li>
<li><strong>Presentation:</strong> How should results be formatted for conversational display?</li>
</ul>
<p>Understanding these components enables systematic approaches to natural language to SQL conversion.</p>
<h2 id="sql-query-fundamentals-for-chatbot-applications">SQL Query Fundamentals for Chatbot Applications</h2>
<p>SQL (Structured Query Language) provides the standard interface for querying relational databases, and chatbot systems must generate valid, safe SQL to retrieve data. While comprehensive SQL instruction lies beyond this chapter's scope, understanding core query patterns enables effective chatbot design.</p>
<h3 id="essential-sql-query-patterns">Essential SQL Query Patterns</h3>
<p>Most chatbot queries fall into a few common patterns:</p>
<p><strong>1. Simple filtering (WHERE clause):</strong></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1">-- User: &quot;Show me sales from the Northeast region&quot;</span>
<span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">sales</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Northeast&#39;</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<p><strong>2. Date range filtering:</strong></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1">-- User: &quot;What were sales in Q4 2024?&quot;</span>
<span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">sales</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">sale_date</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="s1">&#39;2024-10-01&#39;</span>
<span class="w">  </span><span class="k">AND</span><span class="w"> </span><span class="n">sale_date</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="s1">&#39;2024-12-31&#39;</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<p><strong>3. Aggregation (COUNT, SUM, AVG):</strong></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1">-- User: &quot;What&#39;s the total sales for Q4?&quot;</span>
<span class="k">SELECT</span><span class="w"> </span><span class="k">SUM</span><span class="p">(</span><span class="n">amount</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">total_sales</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">sales</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">sale_date</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="s1">&#39;2024-10-01&#39;</span>
<span class="w">  </span><span class="k">AND</span><span class="w"> </span><span class="n">sale_date</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="s1">&#39;2024-12-31&#39;</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<p><strong>4. Grouping (GROUP BY):</strong></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1">-- User: &quot;Show me sales by region&quot;</span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">region</span><span class="p">,</span><span class="w"> </span><span class="k">SUM</span><span class="p">(</span><span class="n">amount</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">total</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">sales</span>
<span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">region</span>
<span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">total</span><span class="w"> </span><span class="k">DESC</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<p><strong>5. Top-N queries (LIMIT/TOP):</strong></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1">-- User: &quot;Who are our top 5 sales reps?&quot;</span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">sales_rep</span><span class="p">,</span><span class="w"> </span><span class="k">SUM</span><span class="p">(</span><span class="n">amount</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">total_sales</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">sales</span>
<span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">sales_rep</span>
<span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">total_sales</span><span class="w"> </span><span class="k">DESC</span>
<span class="k">LIMIT</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<p>For chatbot applications, the SQL patterns remain relatively simple—complex joins, subqueries, and window functions rarely appear in natural language questions. The complexity lies in <strong>mapping user questions to the appropriate pattern</strong> and <strong>extracting the correct parameter values</strong>.</p>
<p>Here's a comparison of query complexity levels appropriate for chatbot systems:</p>
<table>
<thead>
<tr>
<th>Complexity Level</th>
<th>SQL Features</th>
<th>Example User Question</th>
<th>Chatbot Feasibility</th>
</tr>
</thead>
<tbody>
<tr>
<td>Basic</td>
<td>Single table, WHERE clause</td>
<td>"Sales in Northeast"</td>
<td>High - Easy to implement</td>
</tr>
<tr>
<td>Moderate</td>
<td>Aggregation, GROUP BY</td>
<td>"Total sales by region"</td>
<td>High - Common pattern</td>
</tr>
<tr>
<td>Advanced</td>
<td>Date functions, HAVING</td>
<td>"Regions above average in Q4"</td>
<td>Medium - Requires calculation</td>
</tr>
<tr>
<td>Complex</td>
<td>Joins across 2-3 tables</td>
<td>"Products sold by rep in region"</td>
<td>Medium - Need schema knowledge</td>
</tr>
<tr>
<td>Very Complex</td>
<td>Subqueries, window functions</td>
<td>"Month-over-month growth by category"</td>
<td>Low - Consider pre-built views</td>
</tr>
</tbody>
</table>
<p>For production chatbot systems, the pragmatic approach limits supported queries to basic and moderate complexity, while providing pre-built reports or dashboard links for complex analytical questions.</p>
<h2 id="query-parameters-the-bridge-between-questions-and-data">Query Parameters: The Bridge Between Questions and Data</h2>
<p>Query parameters are the specific values that constrain database queries, determining which subset of data the query retrieves. In the SQL query <code>WHERE region = 'Northeast' AND sale_date &gt;= '2024-10-01'</code>, the parameters are <code>'Northeast'</code> and <code>'2024-10-01'</code>. Extracting these parameter values from natural language questions represents the central challenge of database-connected chatbots.</p>
<p>Consider how many ways a user might express the same parameter constraints:</p>
<p><strong>Temporal parameters:</strong></p>
<ul>
<li>"last quarter" → <code>&gt;= '2024-10-01' AND &lt;= '2024-12-31'</code></li>
<li>"Q4" → same date range</li>
<li>"October through December" → same date range</li>
<li>"the past 3 months" → dynamically calculated based on current date</li>
<li>"last 90 days" → dynamically calculated</li>
<li>"this year" → <code>&gt;= '2024-01-01' AND &lt;= '2024-12-31'</code></li>
</ul>
<p><strong>Geographic parameters:</strong></p>
<ul>
<li>"Northeast" → <code>= 'Northeast'</code> or <code>IN ('NY', 'MA', 'CT', ...)</code></li>
<li>"New England" → <code>IN ('MA', 'CT', 'NH', 'VT', 'ME', 'RI')</code></li>
<li>"the East Coast" → region mapping required</li>
<li>"New York" → single state or city (disambiguation needed)</li>
</ul>
<p><strong>Categorical parameters:</strong></p>
<ul>
<li>"top products" → <code>ORDER BY amount DESC LIMIT 10</code></li>
<li>"best performing" → same as above</li>
<li>"worst sellers" → <code>ORDER BY amount ASC LIMIT 10</code></li>
<li>"products under $100" → <code>WHERE price &lt; 100</code></li>
</ul>
<p>Parameter types commonly encountered in chatbot queries include:</p>
<table>
<thead>
<tr>
<th>Parameter Type</th>
<th>Examples</th>
<th>Extraction Challenge</th>
<th>Database Mapping</th>
</tr>
</thead>
<tbody>
<tr>
<td>Temporal</td>
<td>"last month", "Q3", "2024"</td>
<td>Requires date calculation</td>
<td>Date range WHERE clause</td>
</tr>
<tr>
<td>Geographic</td>
<td>"Northeast", "California", "EMEA"</td>
<td>Region name normalization</td>
<td>Exact match or IN clause</td>
</tr>
<tr>
<td>Numeric</td>
<td>"over $1M", "top 10", "above average"</td>
<td>Unit parsing, threshold calc</td>
<td>WHERE/HAVING with operator</td>
</tr>
<tr>
<td>Categorical</td>
<td>"electronics", "active customers"</td>
<td>Category vocabulary mapping</td>
<td>WHERE category = value</td>
</tr>
<tr>
<td>Person</td>
<td>"John Smith", "my team"</td>
<td>Name resolution, possessives</td>
<td>WHERE sales_rep = value</td>
</tr>
<tr>
<td>Comparison</td>
<td>"better than", "compared to"</td>
<td>Requires subquery or join</td>
<td>Complex WHERE clause</td>
</tr>
</tbody>
</table>
<h3 id="parameter-extraction-techniques">Parameter Extraction Techniques</h3>
<p>Extracting parameters from natural language involves several complementary techniques:</p>
<p><strong>1. Named Entity Recognition (NER):</strong> Identifying entities like dates, locations, organizations, and numbers</p>
<p><strong>2. Pattern matching:</strong> Recognizing common phrases like "in [REGION]", "during [TIME]", "over [AMOUNT]"</p>
<p><strong>3. Dependency parsing:</strong> Understanding grammatical relationships to determine what modifies what</p>
<p><strong>4. Slot filling:</strong> Maintaining a structured representation of extracted parameter values</p>
<p><strong>5. Context resolution:</strong> Using conversation history to resolve references like "them," "there," "that quarter"</p>
<p>Let's examine a detailed example of parameter extraction in action:</p>
<p><strong>User question:</strong> "Show me sales over $10,000 in the Northeast region during Q4 last year"</p>
<p><strong>Parameter extraction process:</strong></p>
<ol>
<li><strong>Temporal:</strong> "Q4 last year" → Calculate Q4 of previous year → <code>2023-10-01</code> to <code>2023-12-31</code></li>
<li><strong>Geographic:</strong> "Northeast region" → Map to database region value → <code>'Northeast'</code></li>
<li><strong>Numeric threshold:</strong> "over $10,000" → Extract amount and operator → <code>&gt; 10000</code></li>
<li><strong>Aggregation intent:</strong> "show me sales" → Determine if detail or summary → Individual records</li>
</ol>
<p><strong>Resulting parameter set:</strong></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;entity&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;sales&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;filters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;amount&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;operator&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">10000</span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;region&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;operator&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;=&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Northeast&quot;</span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;sale_date&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;operator&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;BETWEEN&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;2023-10-01&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;2023-12-31&quot;</span><span class="p">]</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;aggregation&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;limit&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>This structured parameter representation can then be transformed into SQL:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">sales</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">amount</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">10000</span>
<span class="w">  </span><span class="k">AND</span><span class="w"> </span><span class="n">region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Northeast&#39;</span>
<span class="w">  </span><span class="k">AND</span><span class="w"> </span><span class="n">sale_date</span><span class="w"> </span><span class="k">BETWEEN</span><span class="w"> </span><span class="s1">&#39;2023-10-01&#39;</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="s1">&#39;2023-12-31&#39;</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<h4 id="microsim-parameter-extraction-interactive-demo">MicroSim: Parameter Extraction Interactive Demo</h4>
<details>
<summary>Parameter Extraction Interactive Demo</summary>
<p>Type: microsim</p>
<p>Learning objective: Demonstrate how parameter extraction identifies and extracts query constraints from natural language questions, showing the step-by-step process of recognizing entities, temporal expressions, and numeric values</p>
<p>Canvas layout (1000x700px):
- Top section (1000x150): Input area
  - Text input for natural language question
  - "Extract Parameters" button
  - Pre-loaded example questions dropdown
- Middle section (1000x400): Two-column display
  - Left column (480x400): NL question with highlighted entities
  - Right column (480x400): Extracted parameters as JSON structure
- Bottom section (1000x150): SQL preview panel</p>
<p>Visual elements:
- Question text with color-coded entity highlighting:
  - Blue: Temporal expressions
  - Green: Geographic entities
  - Orange: Numeric values
  - Purple: Categorical filters
- JSON parameter tree with expandable nodes
- Generated SQL query with parameter substitution highlighted
- Extraction confidence scores for each parameter</p>
<p>Interactive controls:
- Text input: "Enter your natural language question about sales data"
- "Extract Parameters" button
- Example questions dropdown:
  - "Sales over $10,000 in Northeast last quarter"
  - "Top 10 products by revenue in 2024"
  - "Average order value for electronics in California"
  - "How many orders did we get last month?"
  - "Compare Q3 and Q4 sales by region"
- "Step Through" button to show extraction process incrementally
- Hover over highlighted entities to see extraction rules applied</p>
<p>Default parameters:
- Example: "Show me sales over $10,000 in the Northeast region during Q4"
- Current date: 2024-11-15 (for relative date calculations)</p>
<p>Behavior:
- When "Extract Parameters" clicked:
  1. Tokenize and parse the input question
  2. Run NER to identify entities (dates, locations, amounts, products)
  3. Apply pattern matching for common query structures
  4. Extract parameters into structured format
  5. Highlight recognized entities in the question text
  6. Display extracted parameters as JSON in right panel
  7. Generate SQL query using extracted parameters
  8. Show confidence scores for each extraction</p>
<ul>
<li>Entity highlighting:</li>
<li>"over $10,000" → Orange (numeric threshold with operator)</li>
<li>"Northeast region" → Green (geographic entity)</li>
<li>
<p>"Q4" → Blue (temporal expression)</p>
</li>
<li>
<p>JSON structure displays:
  <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;table&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;sales&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;filters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;amount&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;op&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">10000</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;confidence&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.95</span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;region&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;op&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;=&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Northeast&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;confidence&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.98</span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;date&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;op&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;BETWEEN&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;2024-10-01&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;2024-12-31&quot;</span><span class="p">],</span><span class="w"> </span><span class="nt">&quot;confidence&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.92</span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div></p>
</li>
<li>
<p>SQL preview shows:
  <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">sales</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">amount</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">10000</span>
<span class="w">  </span><span class="k">AND</span><span class="w"> </span><span class="n">region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Northeast&#39;</span>
<span class="w">  </span><span class="k">AND</span><span class="w"> </span><span class="n">sale_date</span><span class="w"> </span><span class="k">BETWEEN</span><span class="w"> </span><span class="s1">&#39;2024-10-01&#39;</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="s1">&#39;2024-12-31&#39;</span><span class="p">;</span>
</code></pre></div></td></tr></table></div></p>
</li>
<li>
<p>"Step Through" mode:</p>
</li>
<li>Step 1: Identify intent ("show me" = SELECT query)</li>
<li>Step 2: Find entity ("sales" = table name)</li>
<li>Step 3: Extract numeric filter ("over $10,000")</li>
<li>Step 4: Extract geographic filter ("Northeast region")</li>
<li>Step 5: Calculate temporal range ("Q4" based on current date)</li>
<li>Step 6: Assemble filters into SQL WHERE clause</li>
<li>
<p>Step 7: Generate complete query</p>
</li>
<li>
<p>Hover tooltips explain:</p>
</li>
<li>"over $10,000" → "Numeric threshold: Operator '&gt;' extracted from 'over', value 10000 extracted and normalized"</li>
<li>"Q4" → "Temporal: Q4 of current year (2024) = Oct 1 - Dec 31"</li>
<li>"Northeast region" → "Geographic: Matched to database region value 'Northeast'"</li>
</ul>
<p>Visual styling:
- Entity highlights with semi-transparent colored backgrounds
- JSON tree with syntax highlighting
- SQL query with keyword highlighting (SELECT, FROM, WHERE in blue)
- Confidence scores as progress bars (green = high, yellow = medium, red = low)
- Clear visual connection between highlighted entities and JSON parameters</p>
<p>Implementation notes:
- Use p5.js for rendering
- Implement simplified NER with pattern matching:
  - Temporal: regex for "Q1-Q4", "last [period]", "[month] [year]", etc.
  - Geographic: lookup table of regions/states
  - Numeric: regex for "$X", "X dollars", "over/under/above/below X"
  - Operators: "over" → "&gt;", "under" → "&lt;", "at least" → "&gt;=", etc.
- Date calculation:
  - "Q4" → current year Q4 unless "last" modifier → previous year
  - "last month" → calculate from current date
  - Store current date as configurable parameter
- Parameter confidence scoring:
  - Exact match (e.g., "Northeast" in known regions): 0.95-1.0
  - Pattern match (e.g., "Q4" → date range): 0.85-0.95
  - Inferred (e.g., "this year" with no explicit year): 0.70-0.85
- SQL generation: Template-based with parameter substitution
- Show warnings for ambiguous or low-confidence extractions</p>
</details>
<p>The sophistication of parameter extraction directly impacts chatbot accuracy and user satisfaction. Simple keyword matching might extract "10000" and "Northeast," but fail to recognize that "over" implies a greater-than operator, or that "Q4" requires date range calculation. Production systems employ NLP pipelines (Chapter 11) combined with domain-specific extraction rules to achieve robust parameter identification.</p>
<h2 id="query-templates-reusable-patterns-for-common-questions">Query Templates: Reusable Patterns for Common Questions</h2>
<p>Query templates provide pre-defined SQL structures with placeholders for parameters, enabling rapid, reliable query construction for common question patterns. Instead of generating SQL from scratch for every user question, chatbot systems match questions to templates and fill in the parameter slots—a pragmatic approach that balances flexibility with safety and performance.</p>
<p>A query template consists of:</p>
<ul>
<li><strong>Natural language patterns:</strong> Question formulations that map to this template</li>
<li><strong>SQL structure:</strong> The base query with parameter placeholders</li>
<li><strong>Parameter specifications:</strong> What parameters are required, their types, and validation rules</li>
<li><strong>Result formatting:</strong> How to present query results conversationally</li>
</ul>
<p>Here's an example query template for sales-by-region questions:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;template_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;sales_by_region&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Total sales filtered by region and optional date range&quot;</span><span class="p">,</span>

<span class="w">  </span><span class="nt">&quot;patterns&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;sales in {region}&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;how much did we sell in {region}&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;{region} sales&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;show me {region} revenue&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;what were sales in {region} during {time_period}&quot;</span>
<span class="w">  </span><span class="p">],</span>

<span class="w">  </span><span class="nt">&quot;sql_template&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SELECT SUM(amount) as total FROM sales WHERE region = {region} {date_filter}&quot;</span><span class="p">,</span>

<span class="w">  </span><span class="nt">&quot;parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;region&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;categorical&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;validation&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;must_match_region_list&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;extraction&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;NER_location or keyword_match&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;time_period&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;temporal&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;all_time&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;extraction&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;temporal_expression_parser&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>

<span class="w">  </span><span class="nt">&quot;response_template&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Total sales in {region} {time_phrase}: ${total:,.2f}&quot;</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>When a user asks "What were Northeast sales in Q4?", the system:</p>
<ol>
<li>Matches the question to the <code>sales_by_region</code> template based on pattern similarity</li>
<li>Extracts parameters: <code>region="Northeast"</code>, <code>time_period="Q4 2024"</code></li>
<li>Validates parameters against specifications</li>
<li>Substitutes into SQL template: <code>SELECT SUM(amount) as total FROM sales WHERE region = 'Northeast' AND sale_date BETWEEN '2024-10-01' AND '2024-12-31'</code></li>
<li>Executes query and retrieves result: <code>$1,234,567.89</code></li>
<li>Formats response: "Total sales in Northeast for Q4 2024: $1,234,567.89"</li>
</ol>
<p>The template approach offers several advantages for chatbot database interfaces:</p>
<p><strong>Advantages:</strong></p>
<ul>
<li><strong>Safety:</strong> Pre-defined SQL structures prevent SQL injection attacks</li>
<li><strong>Validation:</strong> Parameter specifications enable type checking and range validation</li>
<li><strong>Performance:</strong> Templates can be optimized and cached</li>
<li><strong>Maintainability:</strong> Centralizing query logic simplifies updates and debugging</li>
<li><strong>Consistency:</strong> Standardized result formatting improves UX</li>
</ul>
<p><strong>Disadvantages:</strong></p>
<ul>
<li><strong>Limited flexibility:</strong> Only handles questions matching template patterns</li>
<li><strong>Template explosion:</strong> Complex domains may require dozens or hundreds of templates</li>
<li><strong>Maintenance overhead:</strong> Adding new query types requires creating new templates</li>
<li><strong>Poor handling of novel questions:</strong> Falls back to error messages or generic responses</li>
</ul>
<p>Here's a comparison of template-based versus dynamic SQL generation approaches:</p>
<table>
<thead>
<tr>
<th>Approach</th>
<th>Strengths</th>
<th>Weaknesses</th>
<th>Best For</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Template-based</strong></td>
<td>Safe, fast, predictable</td>
<td>Limited to predefined queries</td>
<td>Well-defined domains with stable query patterns</td>
</tr>
<tr>
<td><strong>Pattern matching + templates</strong></td>
<td>Flexible within patterns, safe</td>
<td>Requires pattern library</td>
<td>Moderate complexity with some variation</td>
</tr>
<tr>
<td><strong>Semantic parsing</strong></td>
<td>Handles novel questions</td>
<td>Complex, slower, error-prone</td>
<td>Research applications, high variability</td>
</tr>
<tr>
<td><strong>LLM-based SQL generation</strong></td>
<td>Very flexible, natural</td>
<td>Security risks, hallucinations, cost</td>
<td>Prototyping, internal tools with query review</td>
</tr>
</tbody>
</table>
<p>Most production chatbot systems employ a <strong>hybrid approach</strong>: template-based handling for common questions (80-90% of queries), with fallback to more sophisticated parsing or human escalation for edge cases.</p>
<h3 id="building-an-effective-template-library">Building an Effective Template Library</h3>
<p>Successful template-based chatbot systems require careful template design:</p>
<p><strong>1. Start with query frequency analysis:</strong> Analyze actual user questions (if migrating from existing system) or anticipated questions (for new systems) to identify the most common patterns. Build templates for the top 80% of questions first.</p>
<p><strong>2. Design flexible patterns:</strong> Use placeholders that capture variations:
   - <code>{region}</code> matches "Northeast", "California", "EMEA"
   - <code>{time_period}</code> matches "Q4", "last month", "2024"
   - <code>{product_category}</code> matches "electronics", "software", "services"</p>
<p><strong>3. Handle parameter optionality:</strong> Many parameters should be optional with sensible defaults:
   - Time range defaults to "all time" or "current quarter"
   - Region defaults to "all regions"
   - Aggregation defaults to SUM for amounts, COUNT for records</p>
<p><strong>4. Provide template variants:</strong> Create related templates for detail vs. summary questions:
   - "sales in Northeast" (summary) → SUM(amount)
   - "list sales in Northeast" (detail) → SELECT *
   - "breakdown of Northeast sales" (grouped) → GROUP BY product</p>
<p><strong>5. Document and version templates:</strong> Maintain a template registry with descriptions, creation dates, usage statistics, and change history.</p>
<h4 id="diagram-query-template-matching-flow">Diagram: Query Template Matching Flow</h4>
<details>
<summary>Query Template Matching Flow</summary>
<p>Type: workflow</p>
<p>Purpose: Show the process of matching a user's natural language question to a query template, extracting parameters, validating, and generating SQL</p>
<p>Visual style: Flowchart with decision points and process boxes</p>
<p>Steps:
1. Start: "User asks natural language question"
   Hover text: "Example: 'What were Northeast sales in Q4?'"</p>
<ol>
<li>
<p>Process: "Normalize question"
   Hover text: "Lowercase, expand contractions, remove filler words: 'what were northeast sales in q4'"</p>
</li>
<li>
<p>Process: "Calculate similarity to all template patterns"
   Hover text: "Use fuzzy matching or semantic similarity to find best template match"</p>
</li>
<li>
<p>Decision: "Template match found?"
   Hover text: "Does similarity score exceed threshold (e.g., 0.75)?"</p>
</li>
</ol>
<p>5a. Process: "Select best matching template" (if Yes)
    Hover text: "Template 'sales_by_region' matched with score 0.92"</p>
<p>5b. Process: "Return 'unsupported query' message" (if No)
    Hover text: "No template matches question pattern. Suggest similar supported questions."
    → End</p>
<ol>
<li>
<p>Process: "Extract parameters from question"
   Hover text: "Extract 'Northeast' for {region}, 'Q4' for {time_period}"</p>
</li>
<li>
<p>Process: "Validate extracted parameters"
   Hover text: "Check: 'Northeast' in valid regions list? 'Q4' valid temporal expression?"</p>
</li>
<li>
<p>Decision: "Parameters valid?"
   Hover text: "All required parameters present and passing validation?"</p>
</li>
</ol>
<p>9a. Process: "Request missing/invalid parameters" (if No)
    Hover text: "Clarifying question: 'Which region did you mean: Northeast, Northwest, Southeast?'"
    → Loop back to step 6</p>
<p>9b. Process: "Calculate dynamic parameter values" (if Yes)
    Hover text: "Convert 'Q4' to date range: '2024-10-01' to '2024-12-31'"</p>
<ol>
<li>
<p>Process: "Substitute parameters into SQL template"
    Hover text: "Replace {region} with 'Northeast', {date_filter} with date range WHERE clause"</p>
</li>
<li>
<p>Process: "Execute SQL query against database"
    Hover text: "Run: SELECT SUM(amount) FROM sales WHERE region='Northeast' AND sale_date BETWEEN..."</p>
</li>
<li>
<p>Decision: "Query successful?"
    Hover text: "Did query execute without errors?"</p>
</li>
</ol>
<p>13a. Process: "Log error and return friendly message" (if No)
    Hover text: "Log technical error, show user: 'Sorry, I encountered an error retrieving that data'"
    → End</p>
<p>13b. Process: "Format results using response template" (if Yes)
    Hover text: "Insert query results into template: 'Total sales in Northeast for Q4 2024: $1,234,567'"</p>
<ol>
<li>End: "Return formatted response to user"
    Hover text: "Display conversational response with data"</li>
</ol>
<p>Color coding:
- Blue: Input/output steps
- Green: Processing steps
- Yellow: Decision points
- Orange: Validation steps
- Red: Error handling paths</p>
<p>Annotations:
- Show example values flowing through each step
- Highlight validation checks (parameter type, value range, required fields)
- Indicate caching opportunity at template matching step</p>
<p>Swimlanes:
- User Interaction
- Template Matching Engine
- Parameter Extraction &amp; Validation
- SQL Generation &amp; Execution
- Response Formatting</p>
<p>Implementation: Mermaid flowchart or process diagram tool</p>
</details>
<p>Template libraries should be treated as living artifacts, continuously refined based on user query logs, error rates, and user satisfaction metrics. Track which templates get used most frequently, which generate errors, and which result in user clarification requests—this data guides template optimization efforts.</p>
<h2 id="parameterized-queries-security-and-performance">Parameterized Queries: Security and Performance</h2>
<p>Parameterized queries (also called prepared statements) separate SQL structure from data values, providing critical security and performance benefits for database-connected chatbots. Instead of concatenating user input directly into SQL strings—which creates SQL injection vulnerabilities—parameterized queries use placeholders that the database driver safely substitutes with properly escaped values.</p>
<h3 id="the-sql-injection-problem">The SQL Injection Problem</h3>
<p>Consider a naive chatbot implementation that builds SQL by string concatenation:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># DANGEROUS - DO NOT USE</span>
<span class="n">user_input</span> <span class="o">=</span> <span class="s2">&quot;Northeast&quot;</span>
<span class="n">query</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;SELECT * FROM sales WHERE region = &#39;</span><span class="si">{</span><span class="n">user_input</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
<span class="c1"># Results in: SELECT * FROM sales WHERE region = &#39;Northeast&#39;</span>
</code></pre></div></td></tr></table></div>
<p>This works fine for legitimate input, but what if a malicious user provides this input?</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">user_input</span> <span class="o">=</span> <span class="s2">&quot;Northeast&#39; OR &#39;1&#39;=&#39;1&quot;</span>
<span class="n">query</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;SELECT * FROM sales WHERE region = &#39;</span><span class="si">{</span><span class="n">user_input</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
<span class="c1"># Results in: SELECT * FROM sales WHERE region = &#39;Northeast&#39; OR &#39;1&#39;=&#39;1&#39;</span>
<span class="c1"># This returns ALL sales records, bypassing the region filter!</span>
</code></pre></div></td></tr></table></div>
<p>Even worse, an attacker could inject destructive commands:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">user_input</span> <span class="o">=</span> <span class="s2">&quot;Northeast&#39;; DROP TABLE sales; --&quot;</span>
<span class="n">query</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;SELECT * FROM sales WHERE region = &#39;</span><span class="si">{</span><span class="n">user_input</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
<span class="c1"># Results in: SELECT * FROM sales WHERE region = &#39;Northeast&#39;; DROP TABLE sales; --&#39;</span>
<span class="c1"># This could delete the entire sales table!</span>
</code></pre></div></td></tr></table></div>
<p>SQL injection represents one of the most common and dangerous web application vulnerabilities. For chatbot systems that construct queries from natural language input, the attack surface is particularly large because users can phrase questions in countless ways.</p>
<h3 id="using-parameterized-queries-safely">Using Parameterized Queries Safely</h3>
<p>Parameterized queries eliminate SQL injection by separating query structure from data:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># SAFE - Parameterized query</span>
<span class="n">user_input</span> <span class="o">=</span> <span class="s2">&quot;Northeast&#39; OR &#39;1&#39;=&#39;1&quot;</span>  <span class="c1"># Malicious input</span>

<span class="c1"># Using parameterized query (Python with psycopg2 for PostgreSQL)</span>
<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
    <span class="s2">&quot;SELECT * FROM sales WHERE region = </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="p">(</span><span class="n">user_input</span><span class="p">,)</span>
<span class="p">)</span>
<span class="c1"># The database driver treats user_input as a literal string value,</span>
<span class="c1"># not executable SQL. The malicious SQL code becomes inert.</span>
</code></pre></div></td></tr></table></div>
<p>The database driver automatically escapes special characters, ensuring the input is treated as data rather than code. Even if the user provides SQL keywords, operators, or quotes, they become part of the search value rather than altering the query structure.</p>
<p>Here's a comparison of safe versus unsafe query construction:</p>
<table>
<thead>
<tr>
<th>Approach</th>
<th>Code Example</th>
<th>SQL Injection Risk</th>
<th>Performance</th>
<th>Use Case</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>String concatenation</strong></td>
<td><code>f"WHERE region = '{input}'"</code></td>
<td>❌ CRITICAL VULNERABILITY</td>
<td>Slow (re-parse each time)</td>
<td>NEVER USE</td>
</tr>
<tr>
<td><strong>Parameterized query</strong></td>
<td><code>cursor.execute(sql, (input,))</code></td>
<td>✅ SAFE</td>
<td>Fast (prepared once)</td>
<td>ALL production queries</td>
</tr>
<tr>
<td><strong>ORM with parameter binding</strong></td>
<td><code>Sales.query.filter_by(region=input)</code></td>
<td>✅ SAFE</td>
<td>Fast</td>
<td>Web applications</td>
</tr>
<tr>
<td><strong>Stored procedures</strong></td>
<td><code>CALL get_sales_by_region(input)</code></td>
<td>✅ SAFE (if procedure is safe)</td>
<td>Very fast</td>
<td>High-performance systems</td>
</tr>
</tbody>
</table>
<p>For chatbot applications, parameterized queries provide the right balance of security, performance, and simplicity. All modern database drivers support parameterization:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># PostgreSQL (psycopg2)</span>
<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM sales WHERE region = </span><span class="si">%s</span><span class="s2"> AND sale_date &gt;= </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
               <span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">start_date</span><span class="p">))</span>

<span class="c1"># MySQL (mysql-connector-python)</span>
<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM sales WHERE region = </span><span class="si">%s</span><span class="s2"> AND sale_date &gt;= </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
               <span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">start_date</span><span class="p">))</span>

<span class="c1"># SQLite (sqlite3)</span>
<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM sales WHERE region = ? AND sale_date &gt;= ?&quot;</span><span class="p">,</span>
               <span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">start_date</span><span class="p">))</span>

<span class="c1"># SQL Server (pyodbc)</span>
<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM sales WHERE region = ? AND sale_date &gt;= ?&quot;</span><span class="p">,</span>
               <span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">start_date</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
<h3 id="additional-security-considerations">Additional Security Considerations</h3>
<p>Beyond SQL injection protection, database-connected chatbots require several security layers:</p>
<p><strong>1. Least privilege database access:</strong> The chatbot database user should have SELECT permissions only, never INSERT, UPDATE, DELETE, or DDL permissions. If the chatbot requires write access (rare), limit it to specific tables or views.</p>
<p><strong>2. Query timeout limits:</strong> Set maximum execution time to prevent resource exhaustion from complex queries:
   <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SET statement_timeout = 5000&quot;</span><span class="p">)</span>  <span class="c1"># 5 second limit</span>
</code></pre></div></td></tr></table></div></p>
<p><strong>3. Result set size limits:</strong> Cap the number of rows returned to prevent memory exhaustion:
   <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM sales WHERE region = </span><span class="si">%s</span><span class="s2"> LIMIT 1000&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">region</span><span class="p">,))</span>
</code></pre></div></td></tr></table></div></p>
<p><strong>4. Input validation:</strong> Even with parameterized queries, validate parameter values before execution:
   - Check region against allowed list
   - Verify date ranges are reasonable (not 100 years in the past)
   - Ensure numeric values are within expected bounds</p>
<p><strong>5. Audit logging:</strong> Log all queries executed by the chatbot, including user, timestamp, query, and parameters. This enables security auditing and debugging.</p>
<p><strong>6. Database view abstraction:</strong> Create database views that expose only necessary columns and pre-filter sensitive data, then grant chatbot access only to views:
   <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="n">sales_summary</span><span class="w"> </span><span class="k">AS</span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">product_name</span><span class="p">,</span><span class="w"> </span><span class="n">region</span><span class="p">,</span><span class="w"> </span><span class="n">sale_date</span><span class="p">,</span><span class="w"> </span><span class="n">amount</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">sales</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">deleted_at</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="k">NULL</span><span class="p">;</span><span class="w">  </span><span class="c1">-- Hide deleted records</span>
<span class="c1">-- Omits: sale_id, sales_rep (PII), customer_id (PII)</span>

<span class="k">GRANT</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">sales_summary</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">chatbot_user</span><span class="p">;</span>
</code></pre></div></td></tr></table></div></p>
<p>These defense-in-depth strategies ensure that even if one security layer fails, others provide protection.</p>
<h2 id="natural-language-to-sql-conversion-strategies">Natural Language to SQL: Conversion Strategies</h2>
<p>Translating natural language questions into SQL queries represents one of the most challenging problems in conversational AI, requiring understanding of linguistic structure, database schema knowledge, and query semantics. Multiple approaches exist, each with distinct trade-offs between accuracy, flexibility, and implementation complexity.</p>
<h3 id="conversion-approaches-compared">Conversion Approaches Compared</h3>
<p>Here are the primary strategies for natural language to SQL conversion:</p>
<table>
<thead>
<tr>
<th>Approach</th>
<th>How It Works</th>
<th>Accuracy</th>
<th>Flexibility</th>
<th>Complexity</th>
<th>Best Use Case</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Template Matching</strong></td>
<td>Match question to predefined templates</td>
<td>High (95%+) for covered patterns</td>
<td>Low</td>
<td>Low</td>
<td>Stable domains with known question types</td>
</tr>
<tr>
<td><strong>Semantic Parsing</strong></td>
<td>Parse to logical form, then SQL</td>
<td>Medium (70-85%)</td>
<td>Medium</td>
<td>High</td>
<td>Academic research, complex domains</td>
</tr>
<tr>
<td><strong>Neural Seq2Seq</strong></td>
<td>Train model to translate NL→SQL</td>
<td>Medium (65-80%)</td>
<td>High</td>
<td>Very High</td>
<td>Large training datasets available</td>
</tr>
<tr>
<td><strong>LLM Prompting</strong></td>
<td>GPT-4/Claude with few-shot examples</td>
<td>Medium-High (75-90%)</td>
<td>Very High</td>
<td>Low (implementation)</td>
<td>Prototyping, internal tools</td>
</tr>
<tr>
<td><strong>Hybrid</strong></td>
<td>Templates + LLM fallback</td>
<td>High (90%+)</td>
<td>Medium-High</td>
<td>Medium</td>
<td>Production systems</td>
</tr>
</tbody>
</table>
<p>Let's examine each approach in detail:</p>
<h3 id="1-template-matching-covered-in-previous-section">1. Template Matching (Covered in Previous Section)</h3>
<p>We've already explored template-based approaches extensively. This remains the most reliable method for production chatbots with well-defined query patterns.</p>
<h3 id="2-semantic-parsing">2. Semantic Parsing</h3>
<p>Semantic parsing translates natural language to an intermediate logical representation, which then converts to SQL. This approach understands query structure more deeply than simple template matching.</p>
<p>Example semantic parse for "What were sales over $10,000 in Q4?":</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div><pre><span></span><code>Question: &quot;What were sales over $10,000 in Q4?&quot;

Logical Form:
SELECT(
  table: sales,
  aggregate: none,
  filters: [
    Filter(column: amount, operator: &gt;, value: 10000),
    Filter(column: sale_date, operator: BETWEEN,
           value: [date(2024-10-01), date(2024-12-31)])
  ]
)

SQL Generation:
SELECT * FROM sales
WHERE amount &gt; 10000
  AND sale_date BETWEEN &#39;2024-10-01&#39; AND &#39;2024-12-31&#39;
</code></pre></div></td></tr></table></div>
<p>Semantic parsing handles compositional questions better than templates—questions combining multiple constraints or requiring complex aggregations. However, it requires substantial linguistic and database schema annotation, making it impractical for many applications.</p>
<h3 id="3-neural-sequence-to-sequence-models">3. Neural Sequence-to-Sequence Models</h3>
<p>Neural models treat NL→SQL conversion as a translation task, training on large datasets of question-SQL pairs. Models like SQLNet, TypeSQL, and RAT-SQL have achieved strong results on benchmark datasets like WikiSQL and Spider.</p>
<p><strong>Advantages:</strong>
- Learns patterns from data rather than requiring manual rules
- Can generalize to similar but unseen question patterns
- Handles complex multi-table joins and nested queries</p>
<p><strong>Disadvantages:</strong>
- Requires large training datasets (10,000+ question-SQL pairs)
- Domain-specific: trained on one schema doesn't transfer to another
- Black-box nature makes debugging difficult
- Computational overhead (though inference is relatively fast)</p>
<p>For enterprise chatbot applications, the training data requirements and domain-specificity make pure neural approaches challenging unless you already have extensive query logs with gold-standard SQL.</p>
<h3 id="4-large-language-model-llm-prompting">4. Large Language Model (LLM) Prompting</h3>
<p>Modern LLMs like GPT-4 and Claude can generate SQL from natural language questions with appropriate prompting. This approach provides remarkable flexibility with minimal implementation effort:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">prompt</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;Given this database schema:</span>

<span class="s2">CREATE TABLE sales (</span>
<span class="s2">    sale_id INT,</span>
<span class="s2">    product_name VARCHAR(100),</span>
<span class="s2">    region VARCHAR(50),</span>
<span class="s2">    sale_date DATE,</span>
<span class="s2">    amount DECIMAL(10,2)</span>
<span class="s2">);</span>

<span class="s2">Convert this question to a SQL query:</span>
<span class="s2">&quot;</span><span class="si">{</span><span class="n">user_question</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="s2">Return only the SQL query without explanation.</span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="n">sql_query</span> <span class="o">=</span> <span class="n">llm</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="n">prompt</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>Example output for "What were total sales in the Northeast during Q4 2024?":</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="k">SUM</span><span class="p">(</span><span class="n">amount</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">total_sales</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">sales</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Northeast&#39;</span>
<span class="w">  </span><span class="k">AND</span><span class="w"> </span><span class="n">sale_date</span><span class="w"> </span><span class="k">BETWEEN</span><span class="w"> </span><span class="s1">&#39;2024-10-01&#39;</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="s1">&#39;2024-12-31&#39;</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<p><strong>Advantages:</strong>
- Extremely flexible—handles questions never seen before
- Minimal implementation effort
- Can incorporate schema descriptions and example queries for better results
- Handles complex joins and aggregations</p>
<p><strong>Disadvantages:</strong>
- Non-deterministic—same question may generate different SQL
- Hallucination risk—may reference non-existent tables or columns
- Security concerns—requires careful validation before execution
- API costs and latency
- No guarantee of SQL correctness</p>
<p>For production systems, LLM-generated SQL should <strong>never execute directly without validation</strong>. Safe implementation requires:</p>
<ol>
<li>Schema validation: Verify all referenced tables and columns exist</li>
<li>Query allowlist: Check that generated query matches expected patterns</li>
<li>Dry-run execution: Test query with LIMIT 1 before full execution</li>
<li>Human review: For high-stakes queries, show SQL to user for approval</li>
</ol>
<h3 id="5-hybrid-approaches-recommended-for-production">5. Hybrid Approaches (Recommended for Production)</h3>
<p>The most robust production systems combine approaches:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code>User Question
     ↓
Template Matching (handles 80-90% of queries)
     ↓ (if no match)
LLM SQL Generation (handles novel questions)
     ↓
Schema Validation (verify table/column names)
     ↓
Pattern Validation (ensure safe query structure)
     ↓
Execution with safeguards (timeout, result limits)
</code></pre></div></td></tr></table></div>
<p>This architecture provides template reliability for common patterns while gracefully handling unusual questions through LLM generation with appropriate safety checks.</p>
<h4 id="diagram-natural-language-to-sql-conversion-pipeline">Diagram: Natural Language to SQL Conversion Pipeline</h4>
<details>
<summary>Natural Language to SQL Conversion Pipeline</summary>
<p>Type: diagram</p>
<p>Purpose: Illustrate the complete pipeline for converting natural language questions to executed SQL queries, showing multiple conversion strategies and safety layers</p>
<p>Components to show:
- Input Layer:
  - User natural language question
  - Question normalization (lowercase, expand abbreviations)</p>
<ul>
<li>Conversion Strategy Layer (parallel branches):
  Branch 1: Template-Based Path<ul>
<li>Template pattern matching</li>
<li>Parameter extraction</li>
<li>Template SQL substitution</li>
<li>Confidence score: HIGH</li>
</ul>
</li>
</ul>
<p>Branch 2: LLM-Based Path
    - Schema-aware LLM prompt construction
    - LLM SQL generation
    - Confidence score: MEDIUM</p>
<p>Branch 3: Semantic Parsing Path (optional)
    - Linguistic parsing
    - Logical form construction
    - SQL generation from logical form
    - Confidence score: MEDIUM</p>
<ul>
<li>Selection &amp; Validation Layer:</li>
<li>Select highest confidence result</li>
<li>Schema validation (verify tables/columns exist)</li>
<li>Query pattern validation (ensure safe structure)</li>
<li>
<p>Parameter sanitization</p>
</li>
<li>
<p>Safety &amp; Execution Layer:</p>
</li>
<li>Set query timeout (5 seconds)</li>
<li>Set result limit (1000 rows)</li>
<li>Execute parameterized query</li>
<li>
<p>Catch and handle errors</p>
</li>
<li>
<p>Output Layer:</p>
</li>
<li>Format results for conversational display</li>
<li>Cache query for similar future questions</li>
<li>Log query for analytics</li>
</ul>
<p>Connections:
- User question flows to all conversion strategies in parallel
- Each strategy outputs: SQL candidate + confidence score
- Arrows from strategies converge at selection layer
- Validation layer shows multiple gates (schema check, pattern check, sanitization)
- Safety layer wraps execution with timeout and limit constraints
- Error paths show fallback to human escalation</p>
<p>Style: Layered architecture with parallel processing paths converging</p>
<p>Labels:
- "Template Path: 90% of queries" (thick arrow)
- "LLM Path: Novel queries" (medium arrow)
- "Semantic Parse: Research" (thin dotted arrow)
- Validation gates: "Schema ✓", "Pattern ✓", "Sanitize ✓"
- Safety constraints shown as shields: "5s timeout", "1K limit"</p>
<p>Color scheme:
- Green: Template path (high confidence)
- Yellow: LLM path (medium confidence)
- Orange: Semantic parsing path (experimental)
- Blue: Validation layers
- Red: Safety constraints
- Gray: Error/fallback paths</p>
<p>Visual enhancements:
- Parallel arrows showing concurrent strategy execution
- Validation checkpoints as gates/filters
- Safety layer as protective shields around execution
- Error paths with dotted red lines to fallback handlers</p>
<p>Implementation: Architectural diagram using draw.io or Lucidchart, or Mermaid flowchart</p>
</details>
<p>This hybrid approach achieves high accuracy on common questions (via templates) while maintaining flexibility for edge cases (via LLM), with comprehensive safety validation ensuring no malformed or dangerous queries reach the database.</p>
<h2 id="question-to-query-mapping-understanding-user-intent">Question to Query Mapping: Understanding User Intent</h2>
<p>Mapping natural language questions to appropriate database queries requires more than literal translation—it demands understanding user intent, implicit context, and conversational expectations. The same database table can answer questions in dozens of different ways depending on what the user actually wants to know.</p>
<p>Consider this sales table and several questions users might ask:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">sales</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="n">sale_id</span><span class="w"> </span><span class="nb">INT</span><span class="p">,</span>
<span class="w">    </span><span class="n">product_name</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span>
<span class="w">    </span><span class="n">category</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span>
<span class="w">    </span><span class="n">region</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span>
<span class="w">    </span><span class="n">sale_date</span><span class="w"> </span><span class="nb">DATE</span><span class="p">,</span>
<span class="w">    </span><span class="n">amount</span><span class="w"> </span><span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span>
<span class="w">    </span><span class="n">sales_rep</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p><strong>Different questions requiring different query structures:</strong></p>
<table>
<thead>
<tr>
<th>User Question</th>
<th>User Intent</th>
<th>Required SQL Approach</th>
<th>Specific Challenge</th>
</tr>
</thead>
<tbody>
<tr>
<td>"Sales in Q4?"</td>
<td>Summary total</td>
<td><code>SELECT SUM(amount) WHERE date range</code></td>
<td>Aggregate vs. detail</td>
</tr>
<tr>
<td>"What sold in Q4?"</td>
<td>Product list</td>
<td><code>SELECT DISTINCT product_name WHERE date range</code></td>
<td>Distinct products, not amounts</td>
</tr>
<tr>
<td>"Top products in Q4?"</td>
<td>Ranked list</td>
<td><code>GROUP BY product ORDER BY SUM DESC LIMIT 10</code></td>
<td>Aggregation + ordering</td>
</tr>
<tr>
<td>"Did we hit $1M in Q4?"</td>
<td>Yes/no answer</td>
<td><code>SELECT SUM(amount) &gt;= 1000000 WHERE date range</code></td>
<td>Boolean result</td>
</tr>
<tr>
<td>"Q4 trend?"</td>
<td>Time series</td>
<td><code>GROUP BY month ORDER BY month</code></td>
<td>Temporal grouping</td>
</tr>
<tr>
<td>"Who sold the most in Q4?"</td>
<td>Person identification</td>
<td><code>GROUP BY sales_rep ORDER BY SUM DESC LIMIT 1</code></td>
<td>Group by person, not product</td>
</tr>
<tr>
<td>"How does Q4 compare to Q3?"</td>
<td>Comparison</td>
<td>Requires two aggregations + subtraction</td>
<td>Multiple time periods</td>
</tr>
</tbody>
</table>
<p>Each question references the same time period ("Q4") and same table, but the <strong>intent</strong> differs dramatically:</p>
<ul>
<li><strong>Aggregation intent:</strong> Summary (SUM), Count (COUNT), Average (AVG), or Detail (SELECT *)</li>
<li><strong>Grouping intent:</strong> By product, by region, by time period, by person, or ungrouped</li>
<li><strong>Ordering intent:</strong> Highest first (DESC), lowest first (ASC), chronological, or unordered</li>
<li><strong>Limit intent:</strong> Top N, bottom N, all results, or single result</li>
<li><strong>Comparison intent:</strong> Absolute values, differences, ratios, or trends</li>
</ul>
<p>Successfully mapping questions to queries requires detecting these intent signals:</p>
<p><strong>Aggregation signals:</strong></p>
<ul>
<li>"total", "sum", "how much" → SUM aggregation</li>
<li>"average", "mean" → AVG aggregation</li>
<li>"how many", "count" → COUNT aggregation</li>
<li>"list", "show me", "what" → detail query (SELECT *)</li>
</ul>
<p><strong>Grouping signals:</strong></p>
<ul>
<li>"by region", "for each region", "breakdown by region" → GROUP BY region</li>
<li>"per product", "product-by-product" → GROUP BY product</li>
<li>"monthly", "by month" → GROUP BY MONTH(date)</li>
</ul>
<p><strong>Ordering signals:</strong></p>
<ul>
<li>"top", "best", "highest", "most" → ORDER BY DESC</li>
<li>"bottom", "worst", "lowest", "least" → ORDER BY ASC</li>
<li>"first", "earliest" → ORDER BY date ASC</li>
<li>"recent", "latest" → ORDER BY date DESC</li>
</ul>
<p><strong>Limit signals:</strong></p>
<ul>
<li>"top 10", "best 5" → LIMIT N</li>
<li>"who", "which" (singular) → LIMIT 1</li>
<li>No signal → return reasonable default (e.g., 100 rows)</li>
</ul>
<h3 id="handling-ambiguity-through-clarification">Handling Ambiguity Through Clarification</h3>
<p>Many questions contain ambiguity that prevents accurate query construction. Rather than guessing, robust chatbot systems detect ambiguity and request clarification:</p>
<p><strong>Example ambiguous question:</strong> "Show me sales for Smith"</p>
<p>Possible interpretations:
1. Sales made by sales rep named Smith (WHERE sales_rep = 'Smith')
2. Sales of products with "Smith" in the name (WHERE product_name LIKE '%Smith%')
3. Sales in Smith County/Smith region (WHERE region = 'Smith')</p>
<p><strong>Clarification response:</strong>
"I found multiple ways to interpret that. Did you mean:
1. Sales made by sales representative Smith
2. Products with 'Smith' in the name
3. Sales in the Smith region"</p>
<p><strong>Another ambiguous example:</strong> "Compare sales this year and last year"</p>
<p>Possible aggregations:
1. Total sales each year (single number per year)
2. Monthly breakdown each year (12 numbers per year)
3. Regional breakdown each year (N regions × 2 years)</p>
<p><strong>Clarification response:</strong>
"How would you like to see the comparison?
1. Total sales for each year
2. Month-by-month comparison
3. Comparison by region"</p>
<p>Detecting ambiguity requires analyzing:
- Multiple possible entity matches (multiple sales reps named "Smith")
- Underspecified grouping/aggregation (no indication of granularity)
- Vague time references ("recently", "a while ago")
- Ambiguous pronouns or references ("them", "that", "there")</p>
<p>The best user experience balances minimizing clarification requests (which slow conversation flow) with avoiding incorrect query execution (which frustrates users). Use clarification when:
- Confidence in parameter extraction is below threshold (&lt; 0.7)
- Multiple interpretations have similar confidence scores
- Query would access sensitive data or execute expensive operations
- User's question is novel and doesn't match known patterns</p>
<h2 id="slot-filling-structured-parameter-representation">Slot Filling: Structured Parameter Representation</h2>
<p>Slot filling, borrowed from dialog system research, provides a structured approach to parameter extraction by maintaining a frame representation of the query being constructed. Each "slot" corresponds to a query parameter, and the chatbot fills slots incrementally through conversation turns until sufficient information exists to execute the query.</p>
<p>Consider a query template for sales reports with these slots:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;intent&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;get_sales_report&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;slots&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;time_period&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;temporal&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;empty&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;region&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;categorical&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;empty&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;product_category&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;categorical&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;empty&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;aggregation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;total&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;aggregation_type&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;filled&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;total&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Slot filling proceeds through multi-turn conversation:</p>
<p><strong>Turn 1:</strong>
- User: "Show me sales reports"
- System extracts: intent="get_sales_report"
- Required slot "time_period" is empty
- System: "For what time period would you like to see sales?"</p>
<p><strong>Turn 2:</strong>
- User: "Q4"
- System fills: slots["time_period"] = {"value": "Q4 2024", "status": "filled"}
- All required slots filled
- System executes query and returns: "Total sales for Q4 2024: $1,234,567"</p>
<p><strong>Alternative: User provides everything upfront:</strong>
- User: "Show me Q4 sales for electronics in the Northeast"
- System extracts:
  - intent = "get_sales_report"
  - slots["time_period"] = "Q4 2024"
  - slots["region"] = "Northeast"
  - slots["product_category"] = "electronics"
- All slots filled in single turn
- System executes immediately</p>
<p>Slot filling enables natural, flexible conversation by:</p>
<p><strong>1. Supporting incremental refinement:</strong> Users can provide information over multiple turns</p>
<p><strong>2. Handling under-specification:</strong> Missing required information triggers targeted clarification questions</p>
<p><strong>3. Enabling over-specification:</strong> Extra information (like product category) adds optional filters</p>
<p><strong>4. Maintaining context:</strong> Filled slots persist across turns, enabling follow-up questions:
   - User: "How about Q3 instead?"
   - System updates: slots["time_period"] = "Q3 2024" (keeps region and category)</p>
<p><strong>5. Allowing corrections:</strong> Users can revise slot values:
   - User: "Actually, I meant the Northwest region"
   - System updates: slots["region"] = "Northwest"</p>
<h4 id="microsim-slot-filling-interactive-demo">MicroSim: Slot Filling Interactive Demo</h4>
<details>
<summary>Slot Filling Interactive Demo</summary>
<p>Type: microsim</p>
<p>Learning objective: Demonstrate how slot filling maintains query state across multiple conversation turns, showing incremental parameter collection and query execution when all required slots are filled</p>
<p>Canvas layout (900x650px):
- Top section (900x150): Conversation area
  - Chat history showing user and chatbot messages
  - User input field
  - "Send" button</p>
<ul>
<li>Middle section (900x350): Slot status panel</li>
<li>Visual representation of all slots</li>
<li>Each slot shows: name, status (empty/partial/filled), current value</li>
<li>Required vs. optional indicators</li>
<li>
<p>Confidence scores for filled slots</p>
</li>
<li>
<p>Bottom section (900x150): Query preview and execution</p>
</li>
<li>Current SQL query (updates as slots fill)</li>
<li>"Execute Query" button (enabled when required slots filled)</li>
<li>Query results display area</li>
</ul>
<p>Visual elements:
- Conversation bubbles (user = right-aligned blue, bot = left-aligned gray)
- Slot status cards with color coding:
  - Red border: Required, empty
  - Yellow border: Required, partially filled
  - Green border: Filled
  - Gray border: Optional, empty
- SQL query preview with syntax highlighting
- Results table (appears after execution)</p>
<p>Interactive controls:
- Text input: "Type your message..."
- "Send" button (or Enter key)
- Pre-loaded scenarios dropdown:
  - "Complete query in one turn"
  - "Incremental slot filling (3 turns)"
  - "Correction and refinement"
  - "Optional parameters"
- "Reset Conversation" button
- Click any slot to see extraction confidence and source</p>
<p>Default parameters:
- Scenario: "Incremental slot filling"
- Initial query template: sales_report with slots for time_period, region, product_category</p>
<p>Behavior:
- Turn 1:
  - User types: "Show me sales"
  - System extracts intent: "get_sales_report"
  - Identifies required slot empty: time_period
  - Slots panel updates:
    * time_period: EMPTY (required) - red border
    * region: EMPTY (optional) - gray border
    * product_category: EMPTY (optional) - gray border
    * aggregation: FILLED (default: total) - green border
  - Bot responds: "For what time period would you like to see sales?"
  - SQL preview shows: "SELECT SUM(amount) FROM sales WHERE [time_period pending]"</p>
<ul>
<li>Turn 2:</li>
<li>User types: "Q4"</li>
<li>System fills: time_period = "Q4 2024" (dates: 2024-10-01 to 2024-12-31)</li>
<li>Slots panel updates:<ul>
<li>time_period: FILLED - green border, shows "Q4 2024 (Oct-Dec)"</li>
</ul>
</li>
<li>All required slots filled</li>
<li>Bot responds: "Total sales for Q4 2024: $1,234,567.89. Would you like to filter by region or product category?"</li>
<li>SQL preview shows complete query:
    "SELECT SUM(amount) FROM sales WHERE sale_date BETWEEN '2024-10-01' AND '2024-12-31'"</li>
<li>"Execute Query" button enabled and auto-executes</li>
<li>
<p>Results table appears showing: Total: $1,234,567.89</p>
</li>
<li>
<p>Turn 3 (refinement):</p>
</li>
<li>User types: "Just electronics in the Northeast"</li>
<li>System fills:<ul>
<li>product_category = "electronics"</li>
<li>region = "Northeast"</li>
</ul>
</li>
<li>Slots panel updates both slots to FILLED - green borders</li>
<li>SQL preview updates:
    "SELECT SUM(amount) FROM sales WHERE sale_date BETWEEN '2024-10-01' AND '2024-12-31' AND category = 'electronics' AND region = 'Northeast'"</li>
<li>Query re-executes automatically</li>
<li>Bot responds: "Total electronics sales in Northeast for Q4 2024: $456,789.12"</li>
<li>
<p>Results update</p>
</li>
<li>
<p>Alternative scenario (complete in one turn):</p>
</li>
<li>User types: "Show me Q4 electronics sales in the Northeast"</li>
<li>System extracts all parameters in single turn:<ul>
<li>intent: get_sales_report</li>
<li>time_period: Q4 2024</li>
<li>product_category: electronics</li>
<li>region: Northeast</li>
</ul>
</li>
<li>All slots fill immediately - all green borders</li>
<li>Query executes immediately</li>
<li>
<p>Bot responds with results: "$456,789.12"</p>
</li>
<li>
<p>Correction scenario:</p>
</li>
<li>User types: "Actually, I meant Q3"</li>
<li>System updates: time_period = "Q3 2024"</li>
<li>Previous values for region and category preserved</li>
<li>Query re-executes with updated time period</li>
<li>Bot responds: "Updated to Q3 2024. Total electronics sales in Northeast for Q3 2024: $398,234.56"</li>
</ul>
<p>Hover behaviors:
- Hover over any slot card:
  - Shows extraction source: "Extracted from: 'Q4' in user message"
  - Shows confidence: 0.95
  - Shows normalization: "Q4" → "2024-10-01 to 2024-12-31"
  - Shows validation status: ✓ Valid temporal expression</p>
<ul>
<li>Hover over SQL query:</li>
<li>Highlights which slot corresponds to each WHERE clause</li>
<li>Color-codes slot substitutions</li>
</ul>
<p>Visual styling:
- Chat interface: Modern messaging app style
- Slot cards: Material design cards with status indicators
- Color scheme:
  - Red: Required + empty (needs attention)
  - Yellow: Partially filled (extraction uncertain)
  - Green: Filled and validated
  - Gray: Optional + empty
- SQL syntax highlighting: Keywords in blue, values in orange
- Results table: Clean, alternating row colors</p>
<p>Implementation notes:
- Use p5.js for UI rendering
- Maintain slot state object that persists across turns
- Implement simplified NER for parameter extraction:
  - Temporal: "Q1-Q4", "last month", month names, years
  - Geographic: hardcoded region list (Northeast, Northwest, Southeast, Southwest, Midwest)
  - Categorical: product category list (electronics, software, services, hardware)
- Slot filling logic:
  - On each user message, extract any matching slot values
  - Update slot status: empty → filled
  - Check if all required slots filled
  - If yes: enable query execution
  - If no: generate clarification question for next empty required slot
- SQL generation: Template-based with slot substitution
- Query execution: Simulated with hardcoded sample results
- Show status transitions with smooth animations
- Log all slot updates with timestamps</p>
</details>
<p>Slot-based approaches shine in production chatbot systems because they:</p>
<ul>
<li>Provide clear state representation for debugging and logging</li>
<li>Enable systematic handling of missing information</li>
<li>Support natural conversation flow without rigid question order</li>
<li>Allow confidence thresholds per slot (request confirmation if low confidence)</li>
<li>Integrate cleanly with dialog management systems</li>
</ul>
<p>Many commercial chatbot platforms (Dialogflow, Rasa, Amazon Lex) use slot-filling as their core parameter extraction mechanism, providing built-in support for slot types, validation, and multi-turn collection.</p>
<h2 id="query-execution-and-results-handling">Query Execution and Results Handling</h2>
<p>Once a valid SQL query is constructed and validated, execution and results handling determine the actual user experience. Database query execution introduces latency, potential errors, and varying result structures—all requiring careful handling for responsive, reliable chatbot interactions.</p>
<h3 id="execution-best-practices">Execution Best Practices</h3>
<p><strong>1. Use async execution for responsiveness:</strong></p>
<p>Long-running queries (&gt;500ms) should execute asynchronously to prevent blocking the chatbot interface:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span> <span class="nn">asyncio</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">execute_query_async</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">params</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Execute query asynchronously to maintain UI responsiveness&quot;&quot;&quot;</span>
    <span class="c1"># Show &quot;working&quot; indicator to user</span>
    <span class="k">await</span> <span class="n">show_typing_indicator</span><span class="p">()</span>

    <span class="c1"># Execute query in thread pool</span>
    <span class="n">loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">loop</span><span class="o">.</span><span class="n">run_in_executor</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">params</span><span class="p">))</span>
    <span class="n">rows</span> <span class="o">=</span> <span class="k">await</span> <span class="n">loop</span><span class="o">.</span><span class="n">run_in_executor</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">())</span>

    <span class="c1"># Hide &quot;working&quot; indicator</span>
    <span class="k">await</span> <span class="n">hide_typing_indicator</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">rows</span>
</code></pre></div></td></tr></table></div>
<p><strong>2. Set timeouts to prevent resource exhaustion:</strong></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SET statement_timeout = 5000&quot;</span><span class="p">)</span>  <span class="c1"># 5 second limit</span>
</code></pre></div></td></tr></table></div>
<p><strong>3. Limit result set size:</strong></p>
<p>Even when users ask open-ended questions, limit results to prevent overwhelming responses:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1">-- Always append LIMIT clause</span>
<span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">sales</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Northeast&#39;</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">1000</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<p><strong>4. Cache frequent queries:</strong></p>
<p>Identify and cache results for common queries (especially those with expensive aggregations):</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">lru_cache</span>
<span class="kn">import</span> <span class="nn">hashlib</span>

<span class="nd">@lru_cache</span><span class="p">(</span><span class="n">maxsize</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">execute_cached_query</span><span class="p">(</span><span class="n">query_hash</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">params</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Cache query results for 5 minutes&quot;&quot;&quot;</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>

<span class="c1"># Usage</span>
<span class="n">query_hash</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">md5</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">query</span><span class="si">}{</span><span class="n">params</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">execute_cached_query</span><span class="p">(</span><span class="n">query_hash</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p><strong>5. Handle errors gracefully:</strong></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">try</span><span class="p">:</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
<span class="k">except</span> <span class="n">psycopg2</span><span class="o">.</span><span class="n">Error</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="c1"># Log technical error for debugging</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Query failed: </span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">params</span><span class="si">}</span><span class="s2">, Error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Return user-friendly message</span>
    <span class="k">return</span> <span class="s2">&quot;I encountered an error retrieving that data. Please try rephrasing your question or contact support.&quot;</span>
</code></pre></div></td></tr></table></div>
<h3 id="results-formatting-for-conversational-display">Results Formatting for Conversational Display</h3>
<p>Raw database results require formatting for natural conversation. The presentation depends on result structure and user intent:</p>
<p><strong>Single aggregate value:</strong></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Query: SELECT SUM(amount) FROM sales WHERE region = &#39;Northeast&#39;</span>
<span class="c1"># Result: [(1234567.89,)]</span>

<span class="n">response</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Total sales in Northeast: $</span><span class="si">{</span><span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">:</span><span class="s2">,.2f</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="c1"># Output: &quot;Total sales in Northeast: $1,234,567.89&quot;</span>
</code></pre></div></td></tr></table></div>
<p><strong>Small result set (1-5 rows):</strong></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Query: SELECT product_name, amount FROM sales ORDER BY amount DESC LIMIT 5</span>
<span class="c1"># Result: [(&#39;Widget A&#39;, 5000), (&#39;Widget B&#39;, 4500), ...]</span>

<span class="n">response</span> <span class="o">=</span> <span class="s2">&quot;Top products by sales:</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">product</span><span class="p">,</span> <span class="n">amount</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
    <span class="n">response</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">. </span><span class="si">{</span><span class="n">product</span><span class="si">}</span><span class="s2">: $</span><span class="si">{</span><span class="n">amount</span><span class="si">:</span><span class="s2">,.2f</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>

<span class="c1"># Output:</span>
<span class="c1"># Top products by sales:</span>
<span class="c1"># 1. Widget A: $5,000.00</span>
<span class="c1"># 2. Widget B: $4,500.00</span>
<span class="c1"># ...</span>
</code></pre></div></td></tr></table></div>
<p><strong>Medium result set (6-20 rows):</strong></p>
<p>Present as formatted table:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code>Product         Region      Sales
---------------------------------
Widget A        Northeast   $5,000
Widget B        Southwest   $4,500
Widget C        Midwest     $4,200
...
</code></pre></div></td></tr></table></div>
<p><strong>Large result set (&gt;20 rows):</strong></p>
<p>Summarize and offer export:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code>Found 247 sales records matching your criteria:
- Total: $1,234,567.89
- Average: $4,998.65
- Range: $125.00 - $45,678.90

Would you like me to:
1. Show the top 10 results
2. Email you a CSV export
3. Refine the search with additional filters
</code></pre></div></td></tr></table></div>
<p><strong>Empty result set:</strong></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code>No sales found matching those criteria.

You searched for:
- Region: Northeast
- Time: Q4 2024
- Category: Electronics

Try:
- Expanding the time range
- Removing the category filter
- Checking if &#39;Northeast&#39; is the correct region name
</code></pre></div></td></tr></table></div>
<h3 id="handling-query-errors-and-edge-cases">Handling Query Errors and Edge Cases</h3>
<p>Production database chatbots must handle numerous error conditions:</p>
<table>
<thead>
<tr>
<th>Error Type</th>
<th>Example</th>
<th>Detection</th>
<th>User-Facing Response</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Timeout</strong></td>
<td>Query runs &gt; 5 seconds</td>
<td>Catch timeout exception</td>
<td>"That query is taking longer than expected. Try narrowing your search."</td>
</tr>
<tr>
<td><strong>Invalid parameter</strong></td>
<td>Non-existent region "Northeas"</td>
<td>Fuzzy match before execution</td>
<td>"Did you mean 'Northeast'? I don't recognize 'Northeas' as a region."</td>
</tr>
<tr>
<td><strong>Insufficient permissions</strong></td>
<td>User lacks table access</td>
<td>Catch permission denied error</td>
<td>"You don't have access to that data. Contact your administrator."</td>
</tr>
<tr>
<td><strong>Empty result</strong></td>
<td>No matching records</td>
<td>Check row count after execution</td>
<td>"No results found. Try different criteria."</td>
</tr>
<tr>
<td><strong>Ambiguous question</strong></td>
<td>Multiple interpretation paths</td>
<td>Low confidence score</td>
<td>"I'm not sure I understand. Did you mean..."</td>
</tr>
<tr>
<td><strong>Database unavailable</strong></td>
<td>Connection failure</td>
<td>Catch connection exception</td>
<td>"I'm having trouble connecting to the database. Please try again in a moment."</td>
</tr>
</tbody>
</table>
<p>Robust error handling with informative, actionable user messages dramatically improves chatbot reliability and user satisfaction.</p>
<h2 id="key-takeaways">Key Takeaways</h2>
<p>Connecting chatbots to databases transforms them from simple FAQ systems into powerful data interfaces, but this capability introduces significant engineering, security, and user experience challenges. By understanding database query fundamentals, parameter extraction techniques, query templates, and safe execution practices, you can build chatbot systems that make organizational data accessible through natural conversation.</p>
<p>Core concepts to remember:</p>
<ul>
<li>
<p><strong>Database queries require parameter extraction:</strong> Identifying specific values (dates, regions, thresholds) from natural language questions is the central challenge</p>
</li>
<li>
<p><strong>SQL injection is a critical threat:</strong> Always use parameterized queries, never concatenate user input into SQL strings</p>
</li>
<li>
<p><strong>Query templates balance safety and flexibility:</strong> Pre-defined templates with parameter slots provide reliable query construction for common patterns</p>
</li>
<li>
<p><strong>Multiple conversion strategies exist:</strong> Template matching, semantic parsing, neural models, and LLM prompting each have distinct trade-offs</p>
</li>
<li>
<p><strong>Slot filling enables multi-turn collection:</strong> Maintaining structured query state across conversation turns supports natural, incremental parameter gathering</p>
</li>
<li>
<p><strong>Intent matters as much as parameters:</strong> The same table answers different questions depending on whether users want totals, lists, rankings, or comparisons</p>
</li>
<li>
<p><strong>Results formatting affects UX:</strong> Raw query results require conversational formatting appropriate to result size and structure</p>
</li>
<li>
<p><strong>Error handling determines reliability:</strong> Graceful handling of timeouts, invalid parameters, and empty results maintains user trust</p>
</li>
</ul>
<p>As you build database-connected chatbots, start with simple, well-defined query patterns using templates, then progressively add sophistication as you analyze actual user questions and identify gaps in coverage. The most successful systems combine multiple approaches—templates for common queries, LLM generation for novel questions—with comprehensive safety validation ensuring no malformed or dangerous queries reach the database.</p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../11-nlp-pipelines-processing/quiz/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Quiz">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Quiz
              </div>
            </div>
          </a>
        
        
          
          <a href="quiz/" class="md-footer__link md-footer__link--next" aria-label="Next: Quiz">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Quiz
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy", "navigation.expand", "navigation.path", "navigation.prune", "navigation.indexes", "toc.follow", "navigation.top", "navigation.footer", "content.action.edit"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
        <script src="../../js/extra.js"></script>
      
    
  </body>
</html>